<!DOCTYPE html>
<html lang="en">
<head>
    <script src="../../lib/jquery-1.7.2.min.js"></script>
    <link rel="stylesheet" href="../../lib/test/qunit.css" type="text/css" media="screen" />
    <script type="text/javascript" src="../../lib/test/qunit.js"></script>
    <link rel="stylesheet" href="../ohj.ui.css" type="text/css" media="screen" />
 
    <script src="../ohj.util.js"></script>
    <script src="../ohj.ui.js"></script>
    <script src="ohj.pageslider.js"></script>

    <style>
      
        
    </style>
    <script>  
        var basicActivePage = '';
        var fluidActivePage = 'fluid1';
        function isActivePage(slider,activeId) {
            $('#'+slider+' div').each(function () {
                var elem = $(this);
                if (activeId != elem.attr('id')) {
                    equal(elem.css('display'), 'none', 'Unexpected page visible - ' + elem.attr('id') + ' should be hidden');
                }
                else {
                    equal(elem.css('display'), 'block', 'Unexpected page hidden -  ' + elem.attr('id') + ' should be visible');
                }
            });
        }

        $(document).ready(function () {
            module("Basic Page Slider");

            asyncTest("Basic is inline decorated with Page Slider", function () {
                ok($('#basic').hasClass('ohjui'), 'We expect the class ohjui');
                ok($('#basic').hasClass('ohjpageslider'), 'We expect the class ohjpageslider');
                equal($('#basic .ohjpageslider-page').length, 2, 'There should be two pages');
                equal($('#basic1').css('display'), 'block', 'Page 1 should be visible');

                $('#basic').on('pageloadcomplete', function () {
                    start();
                    isActivePage('basic', basicActivePage);
                    basicActivePage = 'basic1';
                    $('#basic').data('ohjpageslider').navigateBack();
                });
                isActivePage('basic', 'basic1');
                $('#basic').data('ohjpageslider').navigateBack();
                $('#basic').data('ohjpageslider').navigateBack();
                $('#basic').data('ohjpageslider').navigateBack();
                $('#basic').data('ohjpageslider').navigateBack();
                isActivePage('basic', 'basic1');
                equal($('#basic').css('display'), 'block', 'Page 1 should be visible');
                $('#basic').data('ohjpageslider').navigateNext();
                $('#basic').data('ohjpageslider').navigateNext();
                $('#basic').data('ohjpageslider').navigateNext();
                $('#basic').data('ohjpageslider').navigateNext();


                basicActivePage = 'basic2';


            });

            module("Fluid navigation");


            $('#fluid').ohjpageslider({
                height: '250px',
                onpageloadcomplete: function () {
                    isActivePage('fluid', fluidActivePage);
                    start();
                }

            });
            
            asyncTest("Fluid is code decorated with Page Slider", function () {
                ok($('#fluid').hasClass('ohjui'), 'We expect the class ohjui');
                ok($('#fluid').hasClass('ohjpageslider'), 'We expect the class ohjpageslider');
                equal($('#fluid .ohjpageslider-page').length, 4, 'There should be four pages');
                isActivePage('fluid', 'fluid1');
                equal($('#fluid').height(), 250, 'We expect the height to be 250');
                isActivePage('fluid', 'fluid1');
                fluidActivePage = 'fluid3';
                $('#fluid').data('ohjpageslider').navigateToPage($('#fluid3'));

            });


            module("Destroy Page Slider");

            test("Destroy the page slider", function () {
                $('#destroy').ohjpageslider();
                ok($('#destroy').data('ohjpageslider') != undefined, 'Destroy page slider created');
                $('#destroy').data('ohjpageslider').destroy();
                equal($('#destroy').data('ohjpageslider'), undefined, 'Destroy page slider destroyed');
            });
        });
    </script>
</head>
<body>
    <h1 id="qunit-header">
        Page Slider Tests</h1>
    <h2 id="qunit-banner">
    </h2>
    <div id="qunit-testrunner-toolbar">
    </div>
    <h2 id="qunit-userAgent">
    </h2>
    <ol id="qunit-tests">
    </ol>
    <div id="qunit-fixture">
        test markup, will be hidden</div>
    <h2>
        Basic</h2>
        <div style="width:300px;">
        <div  id="basic" data-use-ohjpageslider="true" data-height='200px' style="background:whitesmoke;">
            <div id="basic1">Basic 1</div>
            <div id="basic2">Basic 2</div>
        </div>
        </div>
        <h2>
        Fluid</h2>
        <div id="fluid" style="background:whitesmoke;">
            <div id="fluid1">Fluid 1</div>
            <div id="fluid2">Fluid 2</div>
            <div id="fluid3">Fluid 3</div>
            <div id="fluid4">Fluid 4</div>
        </div>
    <div id="destroy"></div>
</body>
</html>
